{"version":3,"file":"index-node10-dev.es.js","sources":["../src/index.ts"],"sourcesContent":["import ansi from 'ansi-styles';\nimport { Styles, LogRecord } from 'nightingale-types';\nimport { styleToHexColor, formatRecordToString } from 'nightingale-formatter';\n\ninterface CodePair {\n  open: string;\n  close: string;\n}\n\ninterface AnsiStyles {\n  [key: string]: CodePair | undefined;\n}\n\nconst ansiStyles: AnsiStyles = {\n  black: ansi.black,\n  red: ansi.red,\n  green: ansi.green,\n  yellow: ansi.yellow,\n  blue: ansi.blue,\n  magenta: ansi.magenta,\n  cyan: ansi.cyan,\n  white: ansi.white,\n  gray: ansi.gray,\n\n  bgBlack: ansi.bgBlack,\n  bgRed: ansi.bgRed,\n  bgGreen: ansi.bgGreen,\n  bgYellow: ansi.bgYellow,\n  bgBlue: ansi.bgBlue,\n  bgMagenta: ansi.bgMagenta,\n  bgCyan: ansi.bgCyan,\n  bgWhite: ansi.bgWhite,\n\n  bold: ansi.bold,\n  underline: ansi.underline,\n\n  // http://www.calmar.ws/vim/256-xterm-24bit-rgb-color-chart.html\n  orange: {\n    open: ansi.color.ansi256.hex(styleToHexColor.orange),\n    close: ansi.color.close,\n  },\n  'gray-light': {\n    open: ansi.color.ansi256.hex(styleToHexColor['gray-light']),\n    close: ansi.color.close,\n  },\n};\n\nexport function style(styles: Styles, string: string) {\n  if (!styles || styles.length === 0 || !string) {\n    return string;\n  }\n\n  return styles.reduce((string: string, styleName: string) => {\n    const style: CodePair | undefined = ansiStyles[styleName];\n\n    if (!style) {\n      throw new Error(`Unknown style: ${styleName}`);\n    }\n\n    return style.open + string + style.close;\n  }, string);\n}\n\n/**\n * @param {Object} record\n * @returns {string}\n */\nexport default function format<T>(record: LogRecord<T>) {\n  return formatRecordToString(record, style);\n}\n"],"names":["ansiStyles","black","ansi","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","bold","underline","orange","open","color","ansi256","hex","styleToHexColor","close","style","styles","string","length","reduce","styleName","Error","format","record","formatRecordToString"],"mappings":";;;AAaA,MAAMA,UAAsB,GAAG;AAC7BC,EAAAA,KAAK,EAAEC,IAAI,CAACD,KADiB;AAE7BE,EAAAA,GAAG,EAAED,IAAI,CAACC,GAFmB;AAG7BC,EAAAA,KAAK,EAAEF,IAAI,CAACE,KAHiB;AAI7BC,EAAAA,MAAM,EAAEH,IAAI,CAACG,MAJgB;AAK7BC,EAAAA,IAAI,EAAEJ,IAAI,CAACI,IALkB;AAM7BC,EAAAA,OAAO,EAAEL,IAAI,CAACK,OANe;AAO7BC,EAAAA,IAAI,EAAEN,IAAI,CAACM,IAPkB;AAQ7BC,EAAAA,KAAK,EAAEP,IAAI,CAACO,KARiB;AAS7BC,EAAAA,IAAI,EAAER,IAAI,CAACQ,IATkB;AAW7BC,EAAAA,OAAO,EAAET,IAAI,CAACS,OAXe;AAY7BC,EAAAA,KAAK,EAAEV,IAAI,CAACU,KAZiB;AAa7BC,EAAAA,OAAO,EAAEX,IAAI,CAACW,OAbe;AAc7BC,EAAAA,QAAQ,EAAEZ,IAAI,CAACY,QAdc;AAe7BC,EAAAA,MAAM,EAAEb,IAAI,CAACa,MAfgB;AAgB7BC,EAAAA,SAAS,EAAEd,IAAI,CAACc,SAhBa;AAiB7BC,EAAAA,MAAM,EAAEf,IAAI,CAACe,MAjBgB;AAkB7BC,EAAAA,OAAO,EAAEhB,IAAI,CAACgB,OAlBe;AAoB7BC,EAAAA,IAAI,EAAEjB,IAAI,CAACiB,IApBkB;AAqB7BC,EAAAA,SAAS,EAAElB,IAAI,CAACkB,SArBa;AAuB7B;AACAC,EAAAA,MAAM,EAAE;AACNC,IAAAA,IAAI,EAAEpB,IAAI,CAACqB,KAAL,CAAWC,OAAX,CAAmBC,GAAnB,CAAuBC,eAAe,CAACL,MAAvC,CADA;AAENM,IAAAA,KAAK,EAAEzB,IAAI,CAACqB,KAAL,CAAWI;AAFZ,GAxBqB;AA4B7B,gBAAc;AACZL,IAAAA,IAAI,EAAEpB,IAAI,CAACqB,KAAL,CAAWC,OAAX,CAAmBC,GAAnB,CAAuBC,eAAe,CAAC,YAAD,CAAtC,CADM;AAEZC,IAAAA,KAAK,EAAEzB,IAAI,CAACqB,KAAL,CAAWI;AAFN;AA5Be,CAA/B;AAkCO,SAASC,KAAT,CAAeC,MAAf,EAA+BC,MAA/B,EAA+C;AACpD,MAAI,CAACD,MAAD,IAAWA,MAAM,CAACE,MAAP,KAAkB,CAA7B,IAAkC,CAACD,MAAvC,EAA+C;AAC7C,WAAOA,MAAP;AACD;;AAED,SAAOD,MAAM,CAACG,MAAP,CAAc,CAACF,MAAD,EAAiBG,SAAjB,KAAuC;AAC1D,UAAML,KAA2B,GAAG5B,UAAU,CAACiC,SAAD,CAA9C;;AAEA,QAAI,CAACL,KAAL,EAAY;AACV,YAAM,IAAIM,KAAJ,CAAW,kBAAiBD,SAAU,EAAtC,CAAN;AACD;;AAED,WAAOL,KAAK,CAACN,IAAN,GAAaQ,MAAb,GAAsBF,KAAK,CAACD,KAAnC;AACD,GARM,EAQJG,MARI,CAAP;AASD;AAED;;;;;AAIe,SAASK,MAAT,CAAmBC,MAAnB,EAAyC;AACtD,SAAOC,oBAAoB,CAACD,MAAD,EAASR,KAAT,CAA3B;AACD;;;;;"}