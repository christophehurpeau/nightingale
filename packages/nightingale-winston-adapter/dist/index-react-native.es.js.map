{"version":3,"file":"index-react-native.es.js","sources":["../src/index.ts"],"sourcesContent":["/* eslint-disable camelcase */\nimport levelNames from \"nightingale-level-names\";\nimport type {\n  Handle,\n  Handler,\n  Level,\n  LogRecord,\n  Metadata,\n} from \"nightingale-types\";\n\nexport type LogCallback = (err: Error | null) => void;\n\nexport interface WinstonTransportType {\n  log: (\n    level: number,\n    message: string,\n    metadata: Record<string, unknown>,\n    callback: LogCallback,\n  ) => void;\n}\n\nexport class WinstonAdapterHandler implements Handler {\n  minLevel: Level;\n\n  handle: Handle;\n\n  constructor(winstonTransport: WinstonTransportType, minLevel: Level) {\n    this.minLevel = minLevel;\n    this.handle = <T extends Metadata>(record: LogRecord<T>) => {\n      // new Promise((resolve, reject) => {\n      winstonTransport.log(\n        record.level,\n        record.message,\n        {\n          level_name: levelNames.get(record.level),\n          key: record.key,\n          metadata: record.metadata,\n          extra: record.extra,\n          context: record.context,\n        },\n        (err) => {\n          if (err) {\n            // eslint-disable-next-line no-console\n            console.warn(err);\n            // return reject(err);\n          }\n\n          // resolve();\n        },\n      );\n      // });\n    };\n  }\n}\n"],"names":[],"mappings":";;AAqBO,MAAM,qBAAA,CAAyC;AAAA,EAKpD,WAAA,CAAY,kBAAwC,QAAA,EAAiB;AACnE,IAAA,IAAA,CAAK,QAAA,GAAW,QAAA;AAChB,IAAA,IAAA,CAAK,MAAA,GAAS,CAAqB,MAAA,KAAyB;AAE1D,MAAA,gBAAA,CAAiB,GAAA;AAAA,QACf,MAAA,CAAO,KAAA;AAAA,QACP,MAAA,CAAO,OAAA;AAAA,QACP;AAAA,UACE,UAAA,EAAY,UAAA,CAAW,GAAA,CAAI,MAAA,CAAO,KAAK,CAAA;AAAA,UACvC,KAAK,MAAA,CAAO,GAAA;AAAA,UACZ,UAAU,MAAA,CAAO,QAAA;AAAA,UACjB,OAAO,MAAA,CAAO,KAAA;AAAA,UACd,SAAS,MAAA,CAAO;AAAA,SAClB;AAAA,QACA,CAAC,GAAA,KAAQ;AACP,UAAA,IAAI,GAAA,EAAK;AAEP,YAAA,OAAA,CAAQ,KAAK,GAAG,CAAA;AAAA,UAElB;AAAA,QAGF;AAAA,OACF;AAAA,IAEF,CAAA;AAAA,EACF;AACF;;;;"}