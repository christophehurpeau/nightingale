{"version":3,"file":"index-node8-dev.cjs.js","sources":["../src/index.ts"],"sourcesContent":["/* eslint camelcase:\"off\" */\nimport levelNames from 'nightingale-level-names';\nimport { Record, Level, Handle } from 'nightingale-types';\n\nexport type LogCallback = (err: Error | null) => void;\n\nexport interface WinstonTransportType {\n  log: (level: number, message: string, metadata: Object, callback: LogCallback) => void;\n}\n\nexport default class WinstonAdapterHandler {\n  minLevel: Level;\n  handle: Handle;\n\n  constructor(winstonTransport: WinstonTransportType, minLevel: number) {\n    this.minLevel = minLevel;\n    this.handle = <T>(record: Record<T>) => {\n      // new Promise((resolve, reject) => {\n      winstonTransport.log(\n        record.level,\n        record.message,\n        {\n          level_name: levelNames.get(record.level),\n          key: record.key,\n          metadata: record.metadata,\n          extra: record.extra,\n          context: record.context,\n        },\n        err => {\n          if (err) {\n            console.warn(err);\n            // return reject(err);\n          }\n\n          // resolve();\n        },\n      );\n      // });\n    };\n  }\n}\n"],"names":["WinstonAdapterHandler","winstonTransport","minLevel","handle","record","log","level","message","levelNames","get","key","metadata","extra","context","err","warn"],"mappings":";;;;;;;;AAAA;AACA,AASe,MAAMA,qBAAN,CAA4B;cAI7BC,gBAAZ,EAAoDC,QAApD,EAAsE;SAHtEA,QAGsE;SAFtEC,MAEsE;SAC/DD,QAAL,GAAgBA,QAAhB;;SACKC,MAAL,GAAkBC,MAAH,IAAyB;;uBAErBC,GAAjB,CACED,OAAOE,KADT,EAEEF,OAAOG,OAFT,EAGE;oBACcC,WAAWC,GAAX,CAAeL,OAAOE,KAAtB,CADd;aAEOF,OAAOM,GAFd;kBAGYN,OAAOO,QAHnB;eAISP,OAAOQ,KAJhB;iBAKWR,OAAOS;OARpB,EAUEC,OAAO;YACDA,GAAJ,EAAS;kBACCC,IAAR,CAAaD,GAAb,EADO;SADJ;;OAVT,EAFsC;KAAxC;;;;;;;"}