{"version":3,"file":"index-node10.cjs.js","sources":["../src/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/camelcase */\nimport levelNames from 'nightingale-level-names';\nimport { LogRecord, Level, Handle } from 'nightingale-types';\n\nexport type LogCallback = (err: Error | null) => void;\n\nexport interface WinstonTransportType {\n  log: (\n    level: number,\n    message: string,\n    metadata: object,\n    callback: LogCallback,\n  ) => void;\n}\n\nexport default class WinstonAdapterHandler {\n  minLevel: Level;\n\n  handle: Handle;\n\n  constructor(winstonTransport: WinstonTransportType, minLevel: number) {\n    this.minLevel = minLevel;\n    this.handle = <T>(record: LogRecord<T>) => {\n      // new Promise((resolve, reject) => {\n      winstonTransport.log(\n        record.level,\n        record.message,\n        {\n          level_name: levelNames.get(record.level),\n          key: record.key,\n          metadata: record.metadata,\n          extra: record.extra,\n          context: record.context,\n        },\n        (err) => {\n          if (err) {\n            console.warn(err);\n            // return reject(err);\n          }\n\n          // resolve();\n        },\n      );\n      // });\n    };\n  }\n}\n"],"names":["WinstonAdapterHandler","constructor","winstonTransport","minLevel","handle","record","log","level","message","level_name","levelNames","get","key","metadata","extra","context","err","console","warn"],"mappings":";;;;;;;;AAAA;AAee,MAAMA,qBAAN,CAA4B;AAKzCC,EAAAA,WAAW,CAACC,gBAAD,EAAyCC,QAAzC,EAA2D;AACpE,SAAKA,QAAL,GAAgBA,QAAhB;;AACA,SAAKC,MAAL,GAAkBC,MAAJ,IAA6B;AACzC;AACAH,MAAAA,gBAAgB,CAACI,GAAjB,CACED,MAAM,CAACE,KADT,EAEEF,MAAM,CAACG,OAFT,EAGE;AACEC,QAAAA,UAAU,EAAEC,UAAU,CAACC,GAAX,CAAeN,MAAM,CAACE,KAAtB,CADd;AAEEK,QAAAA,GAAG,EAAEP,MAAM,CAACO,GAFd;AAGEC,QAAAA,QAAQ,EAAER,MAAM,CAACQ,QAHnB;AAIEC,QAAAA,KAAK,EAAET,MAAM,CAACS,KAJhB;AAKEC,QAAAA,OAAO,EAAEV,MAAM,CAACU;AALlB,OAHF,EAUGC,GAAD,IAAS;AACP,YAAIA,GAAJ,EAAS;AACPC,UAAAA,OAAO,CAACC,IAAR,CAAaF,GAAb,EADO;AAGR,SAJM;;AAOR,OAjBH,EAFyC;AAsB1C,KAtBD;AAuBD;;AA9BwC;;;;"}