{"version":3,"file":"index-browser.es.js","sources":["../src/index.ts"],"sourcesContent":["import { POB_TARGET } from \"pob-babel\";\nimport { Logger, configure, Level, listenUnhandledErrors } from \"nightingale\";\nimport { BrowserConsoleHandler } from \"nightingale-browser-console\";\nimport { ConsoleHandler as TerminalConsoleHandler } from \"nightingale-console\";\n\nexport { configure, addConfig, levels, Level } from \"nightingale\";\n\nexport const ConsoleHandler:\n  | typeof BrowserConsoleHandler\n  | typeof TerminalConsoleHandler =\n  POB_TARGET === \"browser\" ? BrowserConsoleHandler : TerminalConsoleHandler;\n\nexport const logger = new Logger(\"app\");\nexport const appLogger = logger;\n\nif (POB_TARGET !== \"browser\") {\n  Error.stackTraceLimit = Infinity;\n  listenUnhandledErrors(logger);\n}\n\nconst appMinLevel = (() => {\n  if (\n    POB_TARGET !== \"browser\" &&\n    process.env.NIGHTINGALE_APP_MIN_LEVEL !== undefined &&\n    process.env.NIGHTINGALE_APP_MIN_LEVEL !== \"\"\n  ) {\n    return Number(process.env.NIGHTINGALE_APP_MIN_LEVEL);\n  }\n  return process.env.NODE_ENV !== \"production\" ? Level.DEBUG : Level.INFO;\n})();\n\nconst libMinLevel =\n  POB_TARGET !== \"browser\" &&\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL !== undefined &&\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL !== \"\"\n    ? Number(process.env.NIGHTINGALE_LIB_MIN_LEVEL)\n    : Level.INFO;\n\nconfigure(\n  appMinLevel !== libMinLevel\n    ? [\n        {\n          pattern: /^app(:|$)/,\n          handlers: [new ConsoleHandler(appMinLevel)],\n          stop: true,\n        },\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ]\n    : [\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ]\n);\n"],"names":["ConsoleHandler","BrowserConsoleHandler","logger","Logger","appLogger","appMinLevel","process","env","NODE_ENV","Level","DEBUG","INFO","libMinLevel","configure","pattern","handlers","stop"],"mappings":";;;;AAOO,MAAMA,cAEoB,GACJC,sBAA8C;MAE9DC,MAAM,GAAG,IAAIC,MAAM,CAAC,KAAK,EAAC;AAChC,MAAMC,SAAS,GAAGF,OAAM;AAO/B,MAAMG,WAAW,GAAG,CAAC,MAAM;AAQzB,EAAA,OAAOC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,GAAGC,KAAK,CAACC,KAAK,GAAGD,KAAK,CAACE,IAAI,CAAA;AACzE,CAAC,GAAG,CAAA;AAEJ,MAAMC,WAAW,GAKXH,KAAK,CAACE,IAAI,CAAA;AAEhBE,SAAS,CACPR,WAAW,KAAKO,WAAW,GACvB,CACE;AACEE,EAAAA,OAAO,EAAE,WAAW;AACpBC,EAAAA,QAAQ,EAAE,CAAC,IAAIf,cAAc,CAACK,WAAW,CAAC,CAAC;AAC3CW,EAAAA,IAAI,EAAE,IAAA;AACR,CAAC,EACD;AACED,EAAAA,QAAQ,EAAE,CAAC,IAAIf,cAAc,CAACY,WAAW,CAAC,CAAA;AAC5C,CAAC,CACF,GACD,CACE;AACEG,EAAAA,QAAQ,EAAE,CAAC,IAAIf,cAAc,CAACY,WAAW,CAAC,CAAA;AAC5C,CAAC,CAET,CAAC;;;;"}