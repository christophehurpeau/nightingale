{"version":3,"file":"index-node20.mjs","sources":["../src/ConsoleHandler.target-node.ts","../src/setup.target-node.ts","../src/index.ts"],"sourcesContent":["import { ConsoleHandler as TerminalConsoleHandler } from \"nightingale\";\nimport type { BrowserConsoleHandler } from \"nightingale\";\n\nexport const ConsoleHandler:\n  | typeof BrowserConsoleHandler\n  | typeof TerminalConsoleHandler = TerminalConsoleHandler;\n","import type { Logger } from \"nightingale\";\nimport { listenUnhandledErrors } from \"nightingale\";\n\nError.stackTraceLimit = Infinity;\n\nexport const setup = (logger: Logger): void => {\n  listenUnhandledErrors(logger);\n};\n","import { Level, Logger, configure } from \"nightingale\";\nimport { ConsoleHandler } from \"./ConsoleHandler\";\nimport { setup } from \"./setup\";\n\nexport { configure, addConfig, levels, Level } from \"nightingale\";\n\nexport const logger = new Logger(\"app\");\nexport const appLogger = logger;\n\nsetup(logger);\n\nconst appMinLevel = (() => {\n  if (\n    process.env.NIGHTINGALE_APP_MIN_LEVEL !== undefined &&\n    process.env.NIGHTINGALE_APP_MIN_LEVEL !== \"\"\n  ) {\n    return Number(process.env.NIGHTINGALE_APP_MIN_LEVEL);\n  }\n  return process.env.NODE_ENV !== \"production\" ? Level.DEBUG : Level.INFO;\n})();\n\nconst libMinLevel =\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL !== undefined &&\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL !== \"\"\n    ? Number(process.env.NIGHTINGALE_LIB_MIN_LEVEL)\n    : Level.INFO;\n\nconfigure(\n  appMinLevel !== libMinLevel\n    ? [\n        {\n          pattern: /^app(:|$)/,\n          handlers: [new ConsoleHandler(appMinLevel)],\n          stop: true,\n        },\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ]\n    : [\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ],\n);\n"],"names":["TerminalConsoleHandler"],"mappings":";;;AAGO,MAAM,cAAA,GAEuBA,gBAAA;;ACFpC,KAAA,CAAM,eAAA,GAAkB,QAAA;AAEjB,MAAM,KAAA,GAAQ,CAAC,MAAA,KAAyB;AAC7C,EAAA,qBAAA,CAAsB,MAAM,CAAA;AAC9B,CAAA;;ACDO,MAAM,MAAA,GAAS,IAAI,MAAA,CAAO,KAAK;AAC/B,MAAM,SAAA,GAAY;AAEzB,KAAA,CAAM,MAAM,CAAA;AAEZ,MAAM,eAAe,MAAM;AACzB,EAAA,IACE,QAAQ,GAAA,CAAI,yBAAA,KAA8B,UAC1C,OAAA,CAAQ,GAAA,CAAI,8BAA8B,EAAA,EAC1C;AACA,IAAA,OAAO,MAAA,CAAO,OAAA,CAAQ,GAAA,CAAI,yBAAyB,CAAA;AAAA;AAErD,EAAA,OAAO,QAAQ,GAAA,CAAI,QAAA,KAAa,YAAA,GAAe,KAAA,CAAM,QAAQ,KAAA,CAAM,IAAA;AACrE,CAAA,GAAG;AAEH,MAAM,WAAA,GACJ,OAAA,CAAQ,GAAA,CAAI,yBAAA,KAA8B,UAC1C,OAAA,CAAQ,GAAA,CAAI,yBAAA,KAA8B,EAAA,GACtC,MAAA,CAAO,OAAA,CAAQ,GAAA,CAAI,yBAAyB,IAC5C,KAAA,CAAM,IAAA;AAEZ,SAAA;AAAA,EACE,gBAAgB,WAAA,GACZ;AAAA,IACE;AAAA,MACE,OAAA,EAAS,WAAA;AAAA,MACT,QAAA,EAAU,CAAC,IAAI,cAAA,CAAe,WAAW,CAAC,CAAA;AAAA,MAC1C,IAAA,EAAM;AAAA,KACR;AAAA,IACA;AAAA,MACE,QAAA,EAAU,CAAC,IAAI,cAAA,CAAe,WAAW,CAAC;AAAA;AAC5C,GACF,GACA;AAAA,IACE;AAAA,MACE,QAAA,EAAU,CAAC,IAAI,cAAA,CAAe,WAAW,CAAC;AAAA;AAC5C;AAER,CAAA;;;;"}