{"version":3,"file":"index-node18.mjs","sources":["../src/index.ts"],"sourcesContent":["import { POB_TARGET } from 'pob-babel';\nimport { Logger, configure, Level, listenUnhandledErrors } from 'nightingale';\nimport { BrowserConsoleHandler } from 'nightingale-browser-console';\nimport { ConsoleHandler as TerminalConsoleHandler } from 'nightingale-console';\n\nexport { configure, addConfig, levels, Level } from 'nightingale';\n\nexport const ConsoleHandler:\n  | typeof BrowserConsoleHandler\n  | typeof TerminalConsoleHandler =\n  POB_TARGET === 'browser' ? BrowserConsoleHandler : TerminalConsoleHandler;\n\nexport const logger = new Logger('app');\nexport const appLogger = logger;\n\nif (POB_TARGET !== 'browser') {\n  Error.stackTraceLimit = Infinity;\n  listenUnhandledErrors(logger);\n}\n\nconst appMinLevel =\n  POB_TARGET !== 'browser' &&\n  process.env.NIGHTINGALE_APP_MIN_LEVEL !== undefined &&\n  process.env.NIGHTINGALE_APP_MIN_LEVEL !== ''\n    ? Number(process.env.NIGHTINGALE_APP_MIN_LEVEL)\n    : process.env.NODE_ENV !== 'production'\n    ? Level.DEBUG\n    : Level.INFO;\n\nconst libMinLevel =\n  POB_TARGET !== 'browser' &&\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL !== undefined &&\n  process.env.NIGHTINGALE_LIB_MIN_LEVEL !== ''\n    ? Number(process.env.NIGHTINGALE_LIB_MIN_LEVEL)\n    : Level.INFO;\n\nconfigure(\n  appMinLevel !== libMinLevel\n    ? [\n        {\n          pattern: /^app(:|$)/,\n          handlers: [new ConsoleHandler(appMinLevel)],\n          stop: true,\n        },\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ]\n    : [\n        {\n          handlers: [new ConsoleHandler(libMinLevel)],\n        },\n      ],\n);\n"],"names":["ConsoleHandler","TerminalConsoleHandler","logger","Logger","appLogger","Error","stackTraceLimit","Infinity","listenUnhandledErrors","appMinLevel","process","env","NIGHTINGALE_APP_MIN_LEVEL","undefined","Number","NODE_ENV","Level","DEBUG","INFO","libMinLevel","NIGHTINGALE_LIB_MIN_LEVEL","configure","pattern","handlers","stop"],"mappings":";;;;AAOO,MAAMA,cAEoB,GACoBC,iBAAsB;MAE9DC,MAAM,GAAG,IAAIC,MAAM,CAAC,KAAK,EAAC;AAChC,MAAMC,SAAS,GAAGF,OAAM;AAG7BG,KAAK,CAACC,eAAe,GAAGC,QAAQ,CAAA;AAChCC,qBAAqB,CAACN,MAAM,CAAC,CAAA;AAG/B,MAAMO,WAAW,GAEfC,OAAO,CAACC,GAAG,CAACC,yBAAyB,KAAKC,SAAS,IACnDH,OAAO,CAACC,GAAG,CAACC,yBAAyB,KAAK,EAAE,GACxCE,MAAM,CAACJ,OAAO,CAACC,GAAG,CAACC,yBAAyB,CAAC,GAC7CF,OAAO,CAACC,GAAG,CAACI,QAAQ,KAAK,YAAY,GACrCC,KAAK,CAACC,KAAK,GACXD,KAAK,CAACE,IAAI,CAAA;AAEhB,MAAMC,WAAW,GAEfT,OAAO,CAACC,GAAG,CAACS,yBAAyB,KAAKP,SAAS,IACnDH,OAAO,CAACC,GAAG,CAACS,yBAAyB,KAAK,EAAE,GACxCN,MAAM,CAACJ,OAAO,CAACC,GAAG,CAACS,yBAAyB,CAAC,GAC7CJ,KAAK,CAACE,IAAI,CAAA;AAEhBG,SAAS,CACPZ,WAAW,KAAKU,WAAW,GACvB,CACE;AACEG,EAAAA,OAAO,EAAE,WAAW;AACpBC,EAAAA,QAAQ,EAAE,CAAC,IAAIvB,cAAc,CAACS,WAAW,CAAC,CAAC;AAC3Ce,EAAAA,IAAI,EAAE,IAAA;AACR,CAAC,EACD;AACED,EAAAA,QAAQ,EAAE,CAAC,IAAIvB,cAAc,CAACmB,WAAW,CAAC,CAAA;AAC5C,CAAC,CACF,GACD,CACE;AACEI,EAAAA,QAAQ,EAAE,CAAC,IAAIvB,cAAc,CAACmB,WAAW,CAAC,CAAA;AAC5C,CAAC,CAET,CAAC;;;;"}