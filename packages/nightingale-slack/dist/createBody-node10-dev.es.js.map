{"version":3,"file":"createBody-node10-dev.es.js","sources":["../src/createBody.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/camelcase */\nimport markdownFormatter from 'nightingale-markdown-formatter';\nimport rawFormatter from 'nightingale-raw-formatter';\nimport Level from 'nightingale-levels';\nimport { LogRecord } from 'nightingale-types';\nimport SlackConfig from './SlackConfig';\n\nconst levelToSlackColor: { [level: number]: string } = {\n  [Level.TRACE]: '#808080',\n  [Level.DEBUG]: '#808080',\n  [Level.INFO]: '#808080',\n  [Level.WARN]: 'warning',\n  [Level.ERROR]: 'danger',\n  [Level.CRITICAL]: 'danger',\n  [Level.FATAL]: 'danger',\n  [Level.EMERGENCY]: 'danger',\n};\n\nexport default function createBody<T>(\n  record: LogRecord<T>,\n  slackConfig: SlackConfig,\n) {\n  const markdown = markdownFormatter(record);\n  const raw = rawFormatter(record);\n\n  return {\n    channel: slackConfig.channel,\n    username: slackConfig.username,\n    icon_url: slackConfig.iconUrl,\n    icon_emoji: slackConfig.iconEmoji,\n    attachments: [\n      {\n        fallback: raw,\n        title: record.message,\n        color: levelToSlackColor[record.level],\n        text: markdown,\n        mrkdwn_in: ['text'],\n      },\n    ],\n  };\n}\n"],"names":["levelToSlackColor","Level","TRACE","DEBUG","INFO","WARN","ERROR","CRITICAL","FATAL","EMERGENCY","createBody","record","slackConfig","markdown","markdownFormatter","raw","rawFormatter","channel","username","icon_url","iconUrl","icon_emoji","iconEmoji","attachments","fallback","title","message","color","level","text","mrkdwn_in"],"mappings":";;;;AAAA;AACA,AAMA,MAAMA,iBAA8C,GAAG;GACpDC,KAAK,CAACC,KAAP,GAAe,SADsC;GAEpDD,KAAK,CAACE,KAAP,GAAe,SAFsC;GAGpDF,KAAK,CAACG,IAAP,GAAc,SAHuC;GAIpDH,KAAK,CAACI,IAAP,GAAc,SAJuC;GAKpDJ,KAAK,CAACK,KAAP,GAAe,QALsC;GAMpDL,KAAK,CAACM,QAAP,GAAkB,QANmC;GAOpDN,KAAK,CAACO,KAAP,GAAe,QAPsC;GAQpDP,KAAK,CAACQ,SAAP,GAAmB;CARrB;AAWA,AAAe,SAASC,UAAT,CACbC,MADa,EAEbC,WAFa,EAGb;QACMC,QAAQ,GAAGC,iBAAiB,CAACH,MAAD,CAAlC;QACMI,GAAG,GAAGC,YAAY,CAACL,MAAD,CAAxB;SAEO;IACLM,OAAO,EAAEL,WAAW,CAACK,OADhB;IAELC,QAAQ,EAAEN,WAAW,CAACM,QAFjB;IAGLC,QAAQ,EAAEP,WAAW,CAACQ,OAHjB;IAILC,UAAU,EAAET,WAAW,CAACU,SAJnB;IAKLC,WAAW,EAAE,CACX;MACEC,QAAQ,EAAET,GADZ;MAEEU,KAAK,EAAEd,MAAM,CAACe,OAFhB;MAGEC,KAAK,EAAE3B,iBAAiB,CAACW,MAAM,CAACiB,KAAR,CAH1B;MAIEC,IAAI,EAAEhB,QAJR;MAKEiB,SAAS,EAAE,CAAC,MAAD;KANF;GALf;;;;;"}