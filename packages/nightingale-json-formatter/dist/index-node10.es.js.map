{"version":3,"file":"index-node10.es.js","sources":["../src/index.ts"],"sourcesContent":["import type { LogRecord } from 'nightingale-types';\n\nfunction map2object(map: Map<any, any>): any {\n  const object: any = {};\n\n  map.forEach((value: any, key: any) => {\n    if (typeof key === 'object') {\n      // ignore key\n      return;\n    }\n\n    object[key] = value;\n  });\n\n  return object;\n}\n\nfunction stringify(value: any, space?: string | number): string {\n  return JSON.stringify(\n    value,\n    (key, value) => {\n      if (value instanceof Map) {\n        return map2object(value);\n      }\n      if (value instanceof Error) {\n        return {\n          message: value.message,\n          stack: value.stack,\n        };\n      }\n\n      return value;\n    },\n    space,\n  );\n}\n\nexport default function format<T>(record: LogRecord<T>): string {\n  return stringify({\n    key: record.key,\n    level: record.level,\n    datetime: record.datetime,\n    message: record.message,\n    metadata: record.metadata,\n    extra: record.extra,\n  });\n}\n"],"names":["map2object","map","object","forEach","value","key","stringify","space","JSON","Map","Error","message","stack","format","record","level","datetime","metadata","extra"],"mappings":"AAEA,SAASA,UAAT,CAAoBC,GAApB,EAA6C;AAC3C,QAAMC,MAAW,GAAG,EAApB;AAEAD,EAAAA,GAAG,CAACE,OAAJ,CAAY,CAACC,KAAD,EAAaC,GAAb,KAA0B;AACpC,QAAI,OAAOA,GAAP,KAAe,QAAnB,EAA6B;AAC3B;AACA;AACD;;AAEDH,IAAAA,MAAM,CAACG,GAAD,CAAN,GAAcD,KAAd;AACD,GAPD;AASA,SAAOF,MAAP;AACD;;AAED,SAASI,SAAT,CAAmBF,KAAnB,EAA+BG,KAA/B,EAAgE;AAC9D,SAAOC,IAAI,CAACF,SAAL,CACLF,KADK,EAEL,CAACC,GAAD,EAAMD,KAAN,KAAgB;AACd,QAAIA,KAAK,YAAYK,GAArB,EAA0B;AACxB,aAAOT,UAAU,CAACI,KAAD,CAAjB;AACD;;AACD,QAAIA,KAAK,YAAYM,KAArB,EAA4B;AAC1B,aAAO;AACLC,QAAAA,OAAO,EAAEP,KAAK,CAACO,OADV;AAELC,QAAAA,KAAK,EAAER,KAAK,CAACQ;AAFR,OAAP;AAID;;AAED,WAAOR,KAAP;AACD,GAdI,EAeLG,KAfK,CAAP;AAiBD;;AAEc,SAASM,MAAT,CAAmBC,MAAnB,EAAiD;AAC9D,SAAOR,SAAS,CAAC;AACfD,IAAAA,GAAG,EAAES,MAAM,CAACT,GADG;AAEfU,IAAAA,KAAK,EAAED,MAAM,CAACC,KAFC;AAGfC,IAAAA,QAAQ,EAAEF,MAAM,CAACE,QAHF;AAIfL,IAAAA,OAAO,EAAEG,MAAM,CAACH,OAJD;AAKfM,IAAAA,QAAQ,EAAEH,MAAM,CAACG,QALF;AAMfC,IAAAA,KAAK,EAAEJ,MAAM,CAACI;AANC,GAAD,CAAhB;AAQD;;;;"}