{"version":3,"file":"index-browsermodern.es.js","sources":["../src/index.ts"],"sourcesContent":["import type { LogRecord, Metadata } from 'nightingale-types';\n\nfunction map2object(map: Map<unknown, unknown>): unknown {\n  const object: Record<string, unknown> = {};\n\n  map.forEach((value, key) => {\n    if (typeof key === 'object') {\n      // ignore key\n      return;\n    }\n\n    object[String(key)] = value;\n  });\n\n  return object;\n}\n\nfunction stringify(value: unknown, space?: number | string): string {\n  return JSON.stringify(\n    value,\n    (key, objectValue) => {\n      if (objectValue instanceof Map) {\n        return map2object(objectValue);\n      }\n      if (objectValue instanceof Error) {\n        return {\n          message: objectValue.message,\n          stack: objectValue.stack,\n        };\n      }\n\n      return objectValue as unknown;\n    },\n    space,\n  );\n}\n\nexport default function format<T extends Metadata>(\n  record: LogRecord<T>,\n): string {\n  return stringify({\n    key: record.key,\n    level: record.level,\n    datetime: record.datetime,\n    message: record.message,\n    metadata: record.metadata,\n    extra: record.extra,\n  });\n}\n"],"names":["map2object","map","object","forEach","value","key","String","stringify","space","JSON","objectValue","Map","Error","message","stack","format","record","level","datetime","metadata","extra"],"mappings":"AAEA,SAASA,UAAUA,CAACC,GAA0B,EAAW;EACvD,MAAMC,MAA+B,GAAG,EAAE,CAAA;AAE1CD,EAAAA,GAAG,CAACE,OAAO,CAAC,CAACC,KAAK,EAAEC,GAAG,KAAK;AAC1B,IAAA,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;AAC3B;AACA,MAAA,OAAA;AACF,KAAA;AAEAH,IAAAA,MAAM,CAACI,MAAM,CAACD,GAAG,CAAC,CAAC,GAAGD,KAAK,CAAA;AAC7B,GAAC,CAAC,CAAA;AAEF,EAAA,OAAOF,MAAM,CAAA;AACf,CAAA;AAEA,SAASK,SAASA,CAACH,KAAc,EAAEI,KAAuB,EAAU;EAClE,OAAOC,IAAI,CAACF,SAAS,CACnBH,KAAK,EACL,CAACC,GAAG,EAAEK,WAAW,KAAK;IACpB,IAAIA,WAAW,YAAYC,GAAG,EAAE;MAC9B,OAAOX,UAAU,CAACU,WAAW,CAAC,CAAA;AAChC,KAAA;IACA,IAAIA,WAAW,YAAYE,KAAK,EAAE;MAChC,OAAO;QACLC,OAAO,EAAEH,WAAW,CAACG,OAAO;QAC5BC,KAAK,EAAEJ,WAAW,CAACI,KAAAA;OACpB,CAAA;AACH,KAAA;AAEA,IAAA,OAAOJ,WAAW,CAAA;GACnB,EACDF,KACF,CAAC,CAAA;AACH,CAAA;AAEe,SAASO,MAAMA,CAC5BC,MAAoB,EACZ;AACR,EAAA,OAAOT,SAAS,CAAC;IACfF,GAAG,EAAEW,MAAM,CAACX,GAAG;IACfY,KAAK,EAAED,MAAM,CAACC,KAAK;IACnBC,QAAQ,EAAEF,MAAM,CAACE,QAAQ;IACzBL,OAAO,EAAEG,MAAM,CAACH,OAAO;IACvBM,QAAQ,EAAEH,MAAM,CAACG,QAAQ;IACzBC,KAAK,EAAEJ,MAAM,CAACI,KAAAA;AAChB,GAAC,CAAC,CAAA;AACJ;;;;"}